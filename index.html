<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AnimeList</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body style="background-image: url(./gibhli.gif); background-size:cover; background-repeat: no-repeat;">
    <div id="root" style="display: flex; justify-content: center;"></div>
    <script type="text/babel">

        const Head=()=>{
            const styles={
                width:'100%',
                fontSize: '100px',
                marginBottom: '10px',
                display: 'flex',
                justifyContent:'center',
                background: 'rgb(1,117,255)',
                background: 'linear-gradient(90deg, rgba(1,117,255,1) 20%, rgba(74,21,221,1) 64%)',
                borderRadius: '20px',
            }
            return(
                <header style={styles}>
                    Anime List
                </header>
            )
        }

        const Nav = ()=> {
            const styles={
                marginBottom: '10px',
                backgroundColor: 'rgb(169, 14, 196)',
                borderRadius:'20px',
                width: '90%',
                display: 'flex',
                padding:'20px',
                justifyContent: 'space-between',     
            }
            return(
                <nav style={styles}>
                    
                    <a href="#home">Inicio</a>
                    <div>|</div>
                    <a href="#about">Nuevo Post</a>
                    <div>|</div>
                    <a href="#services">Sesion</a>
                    
                </nav>
            )
        }

        const PostItem = ({ post }) => {
            const getRandomColor = () => {
                const first = Math.floor(Math.random() * 256);
                const second = Math.floor(Math.random() * 256);
                const third = Math.floor(Math.random() * 256);

                const color = `rgb(${first},${second},${third}, 0.4)`;
                return color;
            };

            const styles = {
                border: '1px solid #ccc',
                borderRadius: '5px',
                padding: '10px',
                marginBottom: '10px',
                width:'50%',
                display:'flex',
                alignItems:'center',
                flexDirection:'column',
                backgroundColor: getRandomColor(),
            };

            return (
                <div style={styles}>
                    <h2>{post.title}</h2>
                    <p>{post.sinopsis}</p>
                    <p>{post.gender}</p>
                </div>
            );
        };

        const Posts = ()=> {
            const styles={
                width:'100%',
                marginBottom: '10px',
                display: 'flex',
                flexDirection:'column',
                alignItems:'center',
            }

            const [posts, setPosts] = React.useState([]);
            const [error, setError] = React.useState(null);

            const getPosts = async () => {
                const apiResponse = await fetch('https://api.tiburoncin.lat/22295/posts')
                if (!apiResponse.ok) {
                    throw new Error('Error al obtener los datos del API')
                    alert('Error de comunicación con el API. Por favor, inténtalo de nuevo más tarde.')
                    setError('Error de comunicación con el API. Por favor, inténtalo de nuevo más tarde.')
                }
                const jsonPosts = await apiResponse.json() 
                console.log(jsonPosts) 
                setPosts(jsonPosts)
            }   

                        
            React.useEffect(()=>{
                getPosts()
            },[]);


            //debugger;
            if (posts.length === 0){
                return (
                    <ul>
                        Loading...
                    </ul>
                )
            }

            return(
                <section style={styles}>
                    {posts.map(post => (
                        <PostItem key={post.id} post={post} />
                    ))}
                </section>
            )
        }

        const Footer = ()=> {
            const styles={
                width:'97%',
                height:'50%',
                padding:'20px',
                borderRadius: '20px',
                display: 'flex',
                justifyContent:'space-between',
                background: 'rgb(1,117,255)',
                background: 'linear-gradient(90deg, rgba(1,117,255,1) 0%, rgba(215,94,38,1) 0%, rgba(210,62,78,1) 50%)'


            }
            return(
                <footer style={styles}>
                    <div>
                        Legal cosas
                    </div>
                    <div>
                        AnimeList BY Sebastian
                    </div>
                    <div>
                        Follow me
                    </div>
                </footer>
            )
        }


        
        const App = () => {         
            const styles={
                width:'80%',
                height:'100%',
                display: 'flex',
                alignItems:'center',
                flexDirection:'column',
                backgroundColor:'violet',
                padding:'5px',
                borderRadius: '20px',
                backgroundColor: 'rgba(238, 130, 238, 0.9)',
            };

            return (
                <main style={styles}>
                    <Head/>
                    <Nav/>
                    <Posts/>
                    <Footer/>
                </main>
            )
        }

        const root = ReactDOM.createRoot(document.getElementById('root'))
        root.render(<App />)
    </script>
</body>
</html>